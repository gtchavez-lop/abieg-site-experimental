import{S as t,i as a,s,e as r,t as o,k as l,c as e,a as c,g as i,d as n,n as h,b as u,E as f,f as d,F as m,Y as p,G as v,T as y,D as g,H as b,I as E,u as I,w as D,x as w,V as x,A as k,W as T,r as V,j as A,m as L,o as P,v as S,a5 as $,X as U,a3 as M}from"../../../chunks/vendor-969998bb.js";import{g as j}from"../../../chunks/navigation-51f4a605.js";import{s as B}from"../../../chunks/global-04cce44f.js";import{A as N}from"../../../chunks/AdminPostCard-695d917a.js";/* empty css                               */import"../../../chunks/singletons-12a22614.js";function H(t,a,s){const r=t.slice();return r[17]=a[s],r[19]=s,r}function _(t){let a,s,y,I,D,w,x,k,V,A,L,P,S,$,M,j,B,N,H,_,q,O,R,W,X,F,z,J,K,Q,Z,tt,at,st,rt,ot,lt,et,ct,it,nt,ht,ut,ft,dt,mt=t[4]&&C(t);function pt(t,a){return t[6]?G:Y}let vt=pt(t),yt=vt(t);return{c(){a=r("div"),s=r("p"),y=o("Add a story"),I=l(),D=r("div"),w=r("div"),x=r("div"),k=r("input"),V=l(),A=r("label"),L=o("The Title of your story"),P=l(),mt&&mt.c(),S=l(),$=r("div"),M=r("div"),j=r("input"),B=l(),N=r("label"),H=o("Story Header Image URL"),_=l(),q=r("p"),O=o("*If you leave this blank, the site will generate a placeholder image"),R=l(),W=r("div"),X=r("div"),F=r("textarea"),z=l(),J=r("label"),K=o("Story content"),Q=l(),Z=r("p"),tt=o("*We prefer you to write the story content in HTML"),at=l(),st=r("div"),rt=r("div"),ot=r("input"),lt=l(),et=r("label"),yt.c(),ct=l(),it=r("div"),nt=r("button"),ht=o("Post your story"),this.h()},l(t){a=e(t,"DIV",{});var r=c(a);s=e(r,"P",{class:!0});var o=c(s);y=i(o,"Add a story"),o.forEach(n),I=h(r),D=e(r,"DIV",{class:!0});var l=c(D);w=e(l,"DIV",{class:!0});var u=c(w);x=e(u,"DIV",{class:!0});var f=c(x);k=e(f,"INPUT",{type:!0,class:!0,id:!0}),V=h(f),A=e(f,"LABEL",{for:!0});var d=c(A);L=i(d,"The Title of your story"),d.forEach(n),f.forEach(n),u.forEach(n),P=h(l),mt&&mt.l(l),S=h(l),$=e(l,"DIV",{class:!0});var m=c($);M=e(m,"DIV",{class:!0});var p=c(M);j=e(p,"INPUT",{type:!0,class:!0,id:!0}),B=h(p),N=e(p,"LABEL",{for:!0});var v=c(N);H=i(v,"Story Header Image URL"),v.forEach(n),p.forEach(n),_=h(m),q=e(m,"P",{class:!0});var g=c(q);O=i(g,"*If you leave this blank, the site will generate a placeholder image"),g.forEach(n),m.forEach(n),R=h(l),W=e(l,"DIV",{class:!0});var b=c(W);X=e(b,"DIV",{class:!0});var E=c(X);F=e(E,"TEXTAREA",{type:!0,style:!0,class:!0,id:!0}),c(F).forEach(n),z=h(E),J=e(E,"LABEL",{for:!0});var T=c(J);K=i(T,"Story content"),T.forEach(n),E.forEach(n),Q=h(b),Z=e(b,"P",{class:!0});var U=c(Z);tt=i(U,"*We prefer you to write the story content in HTML"),U.forEach(n),b.forEach(n),at=h(l),st=e(l,"DIV",{class:!0});var C=c(st);rt=e(C,"DIV",{class:!0});var Y=c(rt);ot=e(Y,"INPUT",{class:!0,type:!0,id:!0}),lt=h(Y),et=e(Y,"LABEL",{class:!0,for:!0});var G=c(et);yt.l(G),G.forEach(n),Y.forEach(n),C.forEach(n),ct=h(l),it=e(l,"DIV",{class:!0});var ut=c(it);nt=e(ut,"BUTTON",{class:!0});var ft=c(nt);ht=i(ft,"Post your story"),ft.forEach(n),ut.forEach(n),l.forEach(n),r.forEach(n),this.h()},h(){u(s,"class","display-5"),u(k,"type","text"),u(k,"class","form-control bg-transparent text-white"),u(k,"id","story_title"),u(A,"for","story_title"),u(x,"class","form-floating mb-3"),u(w,"class","col-12"),u(j,"type","text"),u(j,"class","form-control bg-transparent text-white"),u(j,"id","story_imageUri"),u(N,"for","story_imageUri"),u(M,"class","form-floating mb-3"),u(q,"class","italic"),u($,"class","col-12"),u(F,"type","text"),f(F,"min-height","10em"),u(F,"class","form-control bg-transparent text-white"),u(F,"id","story_content"),u(J,"for","story_content"),u(X,"class","form-floating mb-3"),u(Z,"class","italic"),u(W,"class","col-12"),u(ot,"class","form-check-input"),u(ot,"type","checkbox"),u(ot,"id","toggleVisibility"),u(et,"class","form-check-label"),u(et,"for","toggleVisibility"),u(rt,"class","form-check form-switch"),u(st,"class","col-12 mt-3"),u(nt,"class","btn btn-primary"),u(it,"class","col-12 mt-5"),u(D,"class","row mt-3")},m(r,o){d(r,a,o),m(a,s),m(s,y),m(a,I),m(a,D),m(D,w),m(w,x),m(x,k),p(k,t[3]),m(x,V),m(x,A),m(A,L),m(D,P),mt&&mt.m(D,null),m(D,S),m(D,$),m($,M),m(M,j),p(j,t[4]),m(M,B),m(M,N),m(N,H),m($,_),m($,q),m(q,O),m(D,R),m(D,W),m(W,X),m(X,F),p(F,t[5]),m(X,z),m(X,J),m(J,K),m(W,Q),m(W,Z),m(Z,tt),m(D,at),m(D,st),m(st,rt),m(rt,ot),ot.checked=t[6],m(rt,lt),m(rt,et),yt.m(et,null),m(D,ct),m(D,it),m(it,nt),m(nt,ht),ft||(dt=[v(k,"input",t[10]),v(j,"input",t[11]),v(F,"input",t[12]),v(ot,"change",t[13]),v(nt,"click",t[7])],ft=!0)},p(t,a){8&a&&k.value!==t[3]&&p(k,t[3]),t[4]?mt?mt.p(t,a):(mt=C(t),mt.c(),mt.m(D,S)):mt&&(mt.d(1),mt=null),16&a&&j.value!==t[4]&&p(j,t[4]),32&a&&p(F,t[5]),64&a&&(ot.checked=t[6]),vt!==(vt=pt(t))&&(yt.d(1),yt=vt(t),yt&&(yt.c(),yt.m(et,null)))},i(t){ut||g((()=>{ut=T(a,U,{x:20,duration:500}),ut.start()}))},o:b,d(t){t&&n(a),mt&&mt.d(),yt.d(),ft=!1,E(dt)}}}function C(t){let a,s,o;return{c(){a=r("div"),s=r("img"),this.h()},l(t){a=e(t,"DIV",{class:!0});var r=c(a);s=e(r,"IMG",{style:!0,src:!0,alt:!0}),r.forEach(n),this.h()},h(){f(s,"width","100%"),f(s,"height","250px"),f(s,"object-fit","cover"),y(s.src,o=""!=t[4]?t[4]:"https://via.placeholder.com/1500?text=This+is+a+placeholder+image")||u(s,"src",o),u(s,"alt","..."),u(a,"class","col-12 mb-1")},m(t,r){d(t,a,r),m(a,s)},p(t,a){16&a&&!y(s.src,o=""!=t[4]?t[4]:"https://via.placeholder.com/1500?text=This+is+a+placeholder+image")&&u(s,"src",o)},d(t){t&&n(a)}}}function Y(t){let a;return{c(){a=o("Public Content")},l(t){a=i(t,"Public Content")},m(t,s){d(t,a,s)},d(t){t&&n(a)}}}function G(t){let a;return{c(){a=o("Exclusive Content")},l(t){a=i(t,"Exclusive Content")},m(t,s){d(t,a,s)},d(t){t&&n(a)}}}function q(t){let a,s,f,p,v,y,b,E,x,k,A=null==t[0]&&O();const L=[W,R],P=[];function S(t,a){return!t[0]||t[1].length<1?0:1}return b=S(t),E=P[b]=L[b](t),{c(){a=r("div"),s=r("p"),f=o("Your Stories"),p=l(),v=r("div"),A&&A.c(),y=l(),E.c(),this.h()},l(t){a=e(t,"DIV",{});var r=c(a);s=e(r,"P",{class:!0});var o=c(s);f=i(o,"Your Stories"),o.forEach(n),p=h(r),v=e(r,"DIV",{class:!0});var l=c(v);A&&A.l(l),y=h(l),E.l(l),l.forEach(n),r.forEach(n),this.h()},h(){u(s,"class","display-5"),u(v,"class","row text-white")},m(t,r){d(t,a,r),m(a,s),m(s,f),m(a,p),m(a,v),A&&A.m(v,null),m(v,y),P[b].m(v,null),k=!0},p(t,a){null==t[0]?A||(A=O(),A.c(),A.m(v,y)):A&&(A.d(1),A=null);let s=b;b=S(t),b===s?P[b].p(t,a):(V(),I(P[s],1,1,(()=>{P[s]=null})),D(),E=P[b],E?E.p(t,a):(E=P[b]=L[b](t),E.c()),w(E,1),E.m(v,null))},i(t){k||(w(E),x||g((()=>{x=T(a,U,{x:20,duration:500}),x.start()})),k=!0)},o(t){I(E),k=!1},d(t){t&&n(a),A&&A.d(),P[b].d()}}}function O(t){let a,s,l;return{c(){a=r("div"),s=r("span"),l=o("Loading..."),this.h()},l(t){a=e(t,"DIV",{class:!0,role:!0});var r=c(a);s=e(r,"SPAN",{class:!0});var o=c(s);l=i(o,"Loading..."),o.forEach(n),r.forEach(n),this.h()},h(){u(s,"class","visually-hidden"),u(a,"class","spinner-border text-info"),u(a,"role","status")},m(t,r){d(t,a,r),m(a,s),m(s,l)},d(t){t&&n(a)}}}function R(t){let a,s,o,l=t[1],i=[];for(let r=0;r<l.length;r+=1)i[r]=X(H(t,l,r));const h=t=>I(i[t],1,1,(()=>{i[t]=null}));return{c(){a=r("div"),s=r("div");for(let t=0;t<i.length;t+=1)i[t].c();this.h()},l(t){a=e(t,"DIV",{class:!0});var r=c(a);s=e(r,"DIV",{class:!0});var o=c(s);for(let a=0;a<i.length;a+=1)i[a].l(o);o.forEach(n),r.forEach(n),this.h()},h(){u(s,"class","mt-1 row row-cols-1 row-cols-md-2 g-3"),u(a,"class","col-12")},m(t,r){d(t,a,r),m(a,s);for(let a=0;a<i.length;a+=1)i[a].m(s,null);o=!0},p(t,a){if(2&a){let r;for(l=t[1],r=0;r<l.length;r+=1){const o=H(t,l,r);i[r]?(i[r].p(o,a),w(i[r],1)):(i[r]=X(o),i[r].c(),w(i[r],1),i[r].m(s,null))}for(V(),r=l.length;r<i.length;r+=1)h(r);D()}},i(t){if(!o){for(let t=0;t<l.length;t+=1)w(i[t]);o=!0}},o(t){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)I(i[a]);o=!1},d(t){t&&n(a),$(i,t)}}}function W(t){let a,s,f,p,v,y;return{c(){a=r("div"),s=r("h5"),f=o("Seems like its empty"),p=l(),v=r("p"),y=o("Make one of your own"),this.h()},l(t){a=e(t,"DIV",{class:!0});var r=c(a);s=e(r,"H5",{});var o=c(s);f=i(o,"Seems like its empty"),o.forEach(n),p=h(r),v=e(r,"P",{});var l=c(v);y=i(l,"Make one of your own"),l.forEach(n),r.forEach(n),this.h()},h(){u(a,"class","col-12")},m(t,r){d(t,a,r),m(a,s),m(s,f),m(a,p),m(a,v),m(v,y)},p:b,i:b,o:b,d(t){t&&n(a)}}}function X(t){let a,s;return a=new N({props:{blog:t[17],index:t[19]}}),{c(){A(a.$$.fragment)},l(t){L(a.$$.fragment,t)},m(t,r){P(a,t,r),s=!0},p(t,s){const r={};2&s&&(r.blog=t[17]),a.$set(r)},i(t){s||(w(a.$$.fragment,t),s=!0)},o(t){I(a.$$.fragment,t),s=!1},d(t){S(a,t)}}}function F(t){let a,s,p,y,b,k,A,L,P,S,$,M,j,B,N,H,C,Y,G,O,R,W,X,F=1==t[2]&&_(t),z=2==t[2]&&q(t);return{c(){a=r("svele:head"),s=r("title"),p=o("Dashboard | Abie G"),y=l(),b=r("main"),k=r("div"),A=r("p"),L=o("Moderator Dashboard"),P=l(),S=r("div"),$=r("button"),M=o("Add a Story"),j=l(),B=r("button"),N=o("Your Stories"),H=l(),C=r("div"),F&&F.c(),Y=l(),z&&z.c(),this.h()},l(t){a=e(t,"SVELE:HEAD",{});var r=c(a);s=e(r,"TITLE",{});var o=c(s);p=i(o,"Dashboard | Abie G"),o.forEach(n),r.forEach(n),y=h(t),b=e(t,"MAIN",{style:!0,class:!0});var l=c(b);k=e(l,"DIV",{class:!0});var u=c(k);A=e(u,"P",{class:!0});var f=c(A);L=i(f,"Moderator Dashboard"),f.forEach(n),P=h(u),S=e(u,"DIV",{class:!0});var d=c(S);$=e(d,"BUTTON",{type:!0,class:!0});var m=c($);M=i(m,"Add a Story"),m.forEach(n),j=h(d),B=e(d,"BUTTON",{type:!0,class:!0});var v=c(B);N=i(v,"Your Stories"),v.forEach(n),d.forEach(n),H=h(u),C=e(u,"DIV",{class:!0});var g=c(C);F&&F.l(g),Y=h(g),z&&z.l(g),g.forEach(n),u.forEach(n),l.forEach(n),this.h()},h(){u(A,"class","display-3"),u($,"type","button"),u($,"class","btn btn-lg btn-outline-primary"),u(B,"type","button"),u(B,"class","btn btn-lg btn-outline-primary"),u(S,"class","btn-group mt-3 w-100"),u(C,"class","mt-5"),u(k,"class","container text-white"),f(b,"margin-bottom","10em"),u(b,"class","svelte-xq1t9b")},m(r,o){d(r,a,o),m(a,s),m(s,p),d(r,y,o),d(r,b,o),m(b,k),m(k,A),m(A,L),m(k,P),m(k,S),m(S,$),m($,M),m(S,j),m(S,B),m(B,N),m(k,H),m(k,C),F&&F.m(C,null),m(C,Y),z&&z.m(C,null),R=!0,W||(X=[v($,"click",t[8]),v(B,"click",t[9])],W=!0)},p(t,[a]){1==t[2]?F?(F.p(t,a),4&a&&w(F,1)):(F=_(t),F.c(),w(F,1),F.m(C,Y)):F&&(F.d(1),F=null),2==t[2]?z?(z.p(t,a),4&a&&w(z,1)):(z=q(t),z.c(),w(z,1),z.m(C,null)):z&&(V(),I(z,1,1,(()=>{z=null})),D())},i(t){R||(w(F),w(z),g((()=>{O&&O.end(1),G=T(b,U,{y:-40,duration:500,delay:500}),G.start()})),R=!0)},o(t){I(z),G&&G.invalidate(),O=x(b,U,{y:40,duration:500}),R=!1},d(t){t&&n(a),t&&n(y),t&&n(b),F&&F.d(),z&&z.d(),t&&O&&O.end(),W=!1,E(X)}}}function z(t,a,s){let r,o,l,e,c,i=null,n=2,h=B.auth.user(),u=!1;k((async t=>{if(B.auth.user()){if("authenticated"==B.auth.user().role){let t=B.auth.user(),{data:a,error:s}=await B.from("users").select("*").eq("id",t.id);1==a[0].isModerator||1==a[0].isAdmin?o=!0:j("/admin")}o&&f()}else j("/admin")}));const f=async t=>{const{data:a,error:o}=await B.from("posts").select("*").eq("author",h.email.split("@")[0]);s(0,i=null),(o||a.length<1)&&s(0,i=!1),(!o||a.length>0)&&(s(1,r=a),s(0,i=!0))};return[i,r,n,l,e,c,u,async t=>{if(l&&c){const{data:t,error:a}=await B.from("posts").insert([{title:l,author:h.email.split("@")[0],content:c,header_img:e||"https://picsum.photos/500/500",isExclusive:u}]);a||(M({text:`${l} is now posted ${u?"exclusively":"publicly"}`,duration:2e3,close:!0,gravity:"bottom",position:"right",style:{background:"#06d6a0",color:"#212529"}}).showToast(),s(3,l=""),s(5,c=""),s(6,u=!1),s(2,n=2),f())}else M({text:"Please fill the Title and the Description",duration:2e3,close:!0,gravity:"bottom",position:"right",style:{background:"#ef476f"}}).showToast()},t=>{s(2,n=1)},t=>{s(2,n=2)},function(){l=this.value,s(3,l)},function(){e=this.value,s(4,e)},function(){c=this.value,s(5,c)},function(){u=this.checked,s(6,u)}]}class J extends t{constructor(t){super(),a(this,t,z,F,s,{})}}export{J as default};
