import{S as s,i as a,s as e,a5 as t,j as o,k as r,e as n,t as c,m as i,n as d,c as l,a as u,g as h,d as f,b as m,E as p,o as v,f as g,F as y,h as b,x as A,D as x,u as E,X as $,v as j,A as k,Y as w,Z as T}from"../../chunks/vendor-1b153074.js";import{g as D}from"../../chunks/navigation-51f4a605.js";import{s as I}from"../../chunks/global-f53028be.js";import"../../chunks/singletons-12a22614.js";function R(s){let a,e,k,D,I,R,P,V,q,L,N,S,U,z,F,H,M;return a=new t({props:{options:{duration:4e3}}}),{c(){o(a.$$.fragment),e=r(),k=n("main"),D=n("div"),I=n("h1"),R=c("Root User Access"),P=r(),V=n("div"),q=n("p"),L=c(s[0]),N=r(),S=n("div"),U=n("span"),z=c("Loading..."),this.h()},l(t){i(a.$$.fragment,t),e=d(t),k=l(t,"MAIN",{class:!0});var o=u(k);D=l(o,"DIV",{class:!0});var r=u(D);I=l(r,"H1",{class:!0});var n=u(I);R=h(n,"Root User Access"),n.forEach(f),P=d(r),V=l(r,"DIV",{style:!0,class:!0});var c=u(V);q=l(c,"P",{});var m=u(q);L=h(m,s[0]),m.forEach(f),N=d(c),S=l(c,"DIV",{class:!0,role:!0});var p=u(S);U=l(p,"SPAN",{class:!0});var v=u(U);z=h(v,"Loading..."),v.forEach(f),p.forEach(f),c.forEach(f),r.forEach(f),o.forEach(f),this.h()},h(){m(I,"class","display-3"),m(U,"class","visually-hidden"),m(S,"class","spinner-border"),m(S,"role","status"),p(V,"margin-top","25vh"),m(V,"class","d-flex flex-column align-items-center justify-content-center"),m(D,"class","container text-white"),m(k,"class","svelte-rplqxt")},m(s,t){v(a,s,t),g(s,e,t),g(s,k,t),y(k,D),y(D,I),y(I,R),y(D,P),y(D,V),y(V,q),y(q,L),y(V,N),y(V,S),y(S,U),y(U,z),M=!0},p(s,[a]){(!M||1&a)&&b(L,s[0])},i(s){M||(A(a.$$.fragment,s),x((()=>{H&&H.end(1),F=w(k,T,{y:-40,duration:500,delay:500}),F.start()})),M=!0)},o(s){E(a.$$.fragment,s),F&&F.invalidate(),H=$(k,T,{y:40,duration:500}),M=!1},d(s){j(a,s),s&&f(e),s&&f(k),s&&H&&H.end()}}}function P(s,a,e){let t,o="Please standby as we check for an existing account";return k((async s=>{t=await I.auth.user(),t?setTimeout((async()=>{e(0,o="Account detected");let{data:s,error:a}=await I.from("users").select("*").eq("id",t.id);setTimeout((()=>{s[0].isAdmin?(e(0,o="Redirecting to dashboard"),setTimeout((()=>{D("/root/dashboard")}),2e3)):(e(0,o="Account is not authorized to proceed further. Redirecting to home page"),setTimeout((()=>{D("/")}),2e3))}),1e3)}),1e3):(e(0,o="Account cannot be verified"),setTimeout((()=>{D("/")}),1e3))})),[o]}class V extends s{constructor(s){super(),a(this,s,P,R,e,{})}}export{V as default};
