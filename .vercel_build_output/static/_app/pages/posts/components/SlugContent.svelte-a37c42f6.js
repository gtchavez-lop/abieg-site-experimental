import{S as t,i as s,s as a,D as o,e,t as l,k as c,c as r,a as n,g as i,d as m,n as h,b as d,f,F as u,h as p,$ as v,H as E,E as g,V as b,G as y,x as D,X as w,A as x,Q as I,ab as M,J as C,Y,Z as T,a4 as V,ac as P,l as A,a9 as H,a0 as N,ad as j,I as k}from"../../../chunks/vendor-1b153074.js";import{s as L}from"../../../chunks/global-f53028be.js";/* empty css                               */function S(t,s,a){const o=t.slice();return o[9]=s[a],o}function _(t){let s,a,o,E,g,b,y,D,w=t[0].title+"",x=t[0].author+"",I=v(t[0].createdAt).format("DD MMM, YYYY")+"";return{c(){s=e("h3"),a=l(w),o=c(),E=e("h5"),g=l("by: "),b=l(x),y=l(" | "),D=l(I),this.h()},l(t){s=r(t,"H3",{class:!0});var e=n(s);a=i(e,w),e.forEach(m),o=h(t),E=r(t,"H5",{});var l=n(E);g=i(l,"by: "),b=i(l,x),y=i(l," | "),D=i(l,I),l.forEach(m),this.h()},h(){d(s,"class","display-1")},m(t,e){f(t,s,e),u(s,a),f(t,o,e),f(t,E,e),u(E,g),u(E,b),u(E,y),u(E,D)},p(t,s){1&s&&w!==(w=t[0].title+"")&&p(a,w),1&s&&x!==(x=t[0].author+"")&&p(b,x),1&s&&I!==(I=v(t[0].createdAt).format("DD MMM, YYYY")+"")&&p(D,I)},d(t){t&&m(s),t&&m(o),t&&m(E)}}}function X(t){let s,a,c,h,p;return{c(){s=e("h6"),a=e("span"),c=l("EXCLUSIVE"),this.h()},l(t){s=r(t,"H6",{class:!0});var o=n(s);a=r(o,"SPAN",{class:!0});var e=n(a);c=i(e,"EXCLUSIVE"),e.forEach(m),o.forEach(m),this.h()},h(){d(a,"class","svelte-1dsosdj"),d(s,"class","exlusiveContent text-white  svelte-1dsosdj")},m(t,o){f(t,s,o),u(s,a),u(a,c)},p(t,s){},i(t){t&&(h||o((()=>{h=Y(a,T,{y:-20,duration:500,delay:800,easing:P}),h.start()}))),t&&(p||o((()=>{p=Y(s,T,{y:-100,duration:500,delay:500,easing:P}),p.start()})))},o:E,d(t){t&&m(s)}}}function B(t){let s,a=t[0].content+"";return{c(){s=e("p"),this.h()},l(t){s=r(t,"P",{class:!0}),n(s).forEach(m),this.h()},h(){d(s,"class","flow-text white-text")},m(t,o){f(t,s,o),s.innerHTML=a},p(t,o){1&o&&a!==(a=t[0].content+"")&&(s.innerHTML=a)},d(t){t&&m(s)}}}function O(t){let s,a;return{c(){s=e("p"),a=l("Loading")},l(t){s=r(t,"P",{});var o=n(s);a=i(o,"Loading"),o.forEach(m)},m(t,o){f(t,s,o),u(s,a)},p:E,d(t){t&&m(s)}}}function $(t){let s,a,o=t[4].length<1&&F(),e=t[4],l=[];for(let c=0;c<e.length;c+=1)l[c]=R(S(t,e,c));return{c(){o&&o.c(),s=c();for(let t=0;t<l.length;t+=1)l[t].c();a=A()},l(t){o&&o.l(t),s=h(t);for(let s=0;s<l.length;s+=1)l[s].l(t);a=A()},m(t,e){o&&o.m(t,e),f(t,s,e);for(let s=0;s<l.length;s+=1)l[s].m(t,e);f(t,a,e)},p(t,c){if(t[4].length<1?o||(o=F(),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),16&c){let s;for(e=t[4],s=0;s<e.length;s+=1){const o=S(t,e,s);l[s]?(l[s].p(o,c),D(l[s],1)):(l[s]=R(o),l[s].c(),D(l[s],1),l[s].m(a.parentNode,a))}for(;s<l.length;s+=1)l[s].d(1);l.length=e.length}},d(t){o&&o.d(t),t&&m(s),H(l,t),t&&m(a)}}}function F(t){let s,a;return{c(){s=e("p"),a=l("No comments for this post")},l(t){s=r(t,"P",{});var o=n(s);a=i(o,"No comments for this post"),o.forEach(m)},m(t,o){f(t,s,o),u(s,a)},d(t){t&&m(s)}}}function R(t){let s,a,b,y,D,w,x,I,M,C,V,P,A,H=t[9].commentor.split("@")[0]+"",N=v(t[9].created_at).format("MMMM DD YYYY @H:mm:ss A")+"",j=t[9].content+"";return{c(){s=e("div"),a=e("div"),b=e("p"),y=l(H),D=c(),w=e("p"),x=l(N),I=c(),M=e("div"),C=e("p"),V=l(j),P=c(),this.h()},l(t){s=r(t,"DIV",{class:!0,style:!0});var o=n(s);a=r(o,"DIV",{class:!0});var e=n(a);b=r(e,"P",{style:!0,class:!0});var l=n(b);y=i(l,H),l.forEach(m),D=h(e),w=r(e,"P",{style:!0,class:!0});var c=n(w);x=i(c,N),c.forEach(m),e.forEach(m),I=h(o),M=r(o,"DIV",{class:!0});var d=n(M);C=r(d,"P",{class:!0});var f=n(C);V=i(f,j),f.forEach(m),d.forEach(m),P=h(o),o.forEach(m),this.h()},h(){g(b,"opacity",".5"),d(b,"class","m-0"),g(w,"opacity",".5"),d(w,"class","m-0 mb-3"),d(a,"class","card-title"),d(C,"class","m-0"),d(M,"class","card-text"),d(s,"class","card ms-5 mb-2 p-3 bg-transparent"),g(s,"border","solid white 2px")},m(t,o){f(t,s,o),u(s,a),u(a,b),u(b,y),u(a,D),u(a,w),u(w,x),u(s,I),u(s,M),u(M,C),u(C,V),u(s,P)},p(t,s){16&s&&H!==(H=t[9].commentor.split("@")[0]+"")&&p(y,H),16&s&&N!==(N=v(t[9].created_at).format("MMMM DD YYYY @H:mm:ss A")+"")&&p(x,N),16&s&&j!==(j=t[9].content+"")&&p(V,j)},i(t){t&&(A||o((()=>{A=Y(s,T,{y:-20,duration:500}),A.start()})))},o:E,d(t){t&&m(s)}}}function U(t){let s,a,o,v,E,g,b,D,w,x,I,M,C,Y,T,V=t[1].email.split("@")[0]+"";return{c(){s=e("h1"),a=l("Comment to this post"),o=c(),v=e("form"),E=e("label"),g=l("Comment as "),b=e("span"),D=l(V),w=c(),x=e("textarea"),I=c(),M=e("button"),C=l("Comment"),this.h()},l(t){s=r(t,"H1",{class:!0});var e=n(s);a=i(e,"Comment to this post"),e.forEach(m),o=h(t),v=r(t,"FORM",{});var l=n(v);E=r(l,"LABEL",{for:!0,class:!0});var c=n(E);g=i(c,"Comment as "),b=r(c,"SPAN",{class:!0});var d=n(b);D=i(d,V),d.forEach(m),c.forEach(m),w=h(l),x=r(l,"TEXTAREA",{rows:!0,type:!0,id:!0,class:!0}),n(x).forEach(m),I=h(l),M=r(l,"BUTTON",{class:!0});var f=n(M);C=i(f,"Comment"),f.forEach(m),l.forEach(m),this.h()},h(){d(s,"class","mt-5 mb-4"),d(b,"class","text-success"),d(E,"for","commentContent"),d(E,"class","form-label"),d(x,"rows","5"),d(x,"type","text"),d(x,"id","commentContent"),d(x,"class","form-control bg-transparent text-white"),d(M,"class","btn btn-success mt-4 px-5")},m(e,l){f(e,s,l),u(s,a),f(e,o,l),f(e,v,l),u(v,E),u(E,g),u(E,b),u(b,D),u(v,w),u(v,x),N(x,t[3]),u(v,I),u(v,M),u(M,C),Y||(T=[y(x,"input",t[8]),y(v,"submit",j(t[6]))],Y=!0)},p(t,s){2&s&&V!==(V=t[1].email.split("@")[0]+"")&&p(D,V),8&s&&N(x,t[3])},d(t){t&&m(s),t&&m(o),t&&m(v),Y=!1,k(T)}}}function G(t){let s,a;return{c(){s=e("h5"),a=l("Please sign in to comment to this post"),this.h()},l(t){s=r(t,"H5",{class:!0});var o=n(s);a=i(o,"Please sign in to comment to this post"),o.forEach(m),this.h()},h(){d(s,"class","mt-5")},m(t,o){f(t,s,o),u(s,a)},p:E,d(t){t&&m(s)}}}function z(t){let s,a,p,v,E,x,I,M,C,V,P,A,H,N,j,k,L,S,F,R,z,J,Q,Z,q,K,W,tt,st,at,ot,et,lt,ct,rt,nt,it,mt=!1,ht=()=>{mt=!1};o(t[7]);let dt=t[0]&&_(t),ft=t[0].isExclusive&&X(),ut=t[0]&&B(t);function pt(t,s){return t[4]?$:O}let vt=pt(t),Et=vt(t);function gt(t,s){return t[1]?U:G}let bt=gt(t),yt=bt(t);return{c(){a=e("main"),p=e("div"),v=e("div"),E=e("div"),x=e("div"),I=e("div"),M=e("a"),C=e("i"),V=c(),P=e("span"),A=l("Back to Posts"),N=c(),j=e("div"),k=c(),L=e("div"),S=e("div"),dt&&dt.c(),F=c(),R=e("div"),z=e("img"),Z=c(),ft&&ft.c(),q=c(),K=e("div"),ut&&ut.c(),W=c(),tt=e("div"),st=e("h1"),at=l("Comments"),ot=c(),Et.c(),et=c(),yt.c(),this.h()},l(t){a=r(t,"MAIN",{class:!0});var s=n(a);p=r(s,"DIV",{});var o=n(p);v=r(o,"DIV",{class:!0});var e=n(v);E=r(e,"DIV",{class:!0});var l=n(E);x=r(l,"DIV",{class:!0});var c=n(x);I=r(c,"DIV",{class:!0});var d=n(I);M=r(d,"A",{href:!0,class:!0});var f=n(M);C=r(f,"I",{class:!0,style:!0}),n(C).forEach(m),V=h(f),P=r(f,"SPAN",{});var u=n(P);A=i(u,"Back to Posts"),u.forEach(m),f.forEach(m),d.forEach(m),N=h(c),j=r(c,"DIV",{class:!0}),n(j).forEach(m),c.forEach(m),k=h(l),L=r(l,"DIV",{class:!0});var g=n(L);S=r(g,"DIV",{class:!0});var b=n(S);dt&&dt.l(b),b.forEach(m),F=h(g),R=r(g,"DIV",{class:!0});var y=n(R);z=r(y,"IMG",{src:!0,alt:!0,class:!0}),Z=h(y),ft&&ft.l(y),y.forEach(m),q=h(g),K=r(g,"DIV",{class:!0});var D=n(K);ut&&ut.l(D),D.forEach(m),g.forEach(m),W=h(l),tt=r(l,"DIV",{class:!0});var w=n(tt);st=r(w,"H1",{});var Y=n(st);at=i(Y,"Comments"),Y.forEach(m),ot=h(w),Et.l(w),et=h(w),yt.l(w),w.forEach(m),l.forEach(m),e.forEach(m),o.forEach(m),s.forEach(m),this.h()},h(){d(C,"class","bi bi-arrow-left me-3"),g(C,"font-size","1.1em"),d(M,"href","/posts"),d(M,"class","btn btn-lg text-white"),d(I,"class","col-sm-12 col-md-4 d-flex justify-content-start"),d(j,"class","col-sm-12 col-md-8"),d(x,"class","row"),d(S,"class","col-12"),b(z.src,J=t[0].header_img)||d(z,"src",J),d(z,"alt",Q=t[0].title),d(z,"class","svelte-1dsosdj"),d(R,"class","imgContainer svelte-1dsosdj"),d(K,"class","col-12 mt-5"),d(L,"class","row mt-3"),d(tt,"class","d-flex flex-column mt-5 "),d(E,"class","text-white"),d(v,"class","mb-5"),d(a,"class","container svelte-1dsosdj")},m(o,e){f(o,a,e),u(a,p),u(p,v),u(v,E),u(E,x),u(x,I),u(I,M),u(M,C),u(M,V),u(M,P),u(P,A),u(x,N),u(x,j),u(E,k),u(E,L),u(L,S),dt&&dt.m(S,null),u(L,F),u(L,R),u(R,z),u(R,Z),ft&&ft.m(R,null),u(L,q),u(L,K),ut&&ut.m(K,null),u(E,W),u(E,tt),u(tt,st),u(st,at),u(tt,ot),Et.m(tt,null),u(tt,et),yt.m(tt,null),rt=!0,nt||(it=y(window,"scroll",(()=>{mt=!0,clearTimeout(s),s=setTimeout(ht,100),t[7]()})),nt=!0)},p(t,[a]){4&a&&!mt&&(mt=!0,clearTimeout(s),scrollTo(window.pageXOffset,t[2]),s=setTimeout(ht,100)),t[0]?dt?dt.p(t,a):(dt=_(t),dt.c(),dt.m(S,null)):dt&&(dt.d(1),dt=null),(!rt||1&a&&!b(z.src,J=t[0].header_img))&&d(z,"src",J),(!rt||1&a&&Q!==(Q=t[0].title))&&d(z,"alt",Q),t[0].isExclusive?ft?1&a&&D(ft,1):(ft=X(),ft.c(),D(ft,1),ft.m(R,null)):ft&&(ft.d(1),ft=null),t[0]?ut?ut.p(t,a):(ut=B(t),ut.c(),ut.m(K,null)):ut&&(ut.d(1),ut=null),vt===(vt=pt(t))&&Et?Et.p(t,a):(Et.d(1),Et=vt(t),Et&&(Et.c(),Et.m(tt,et))),bt===(bt=gt(t))&&yt?yt.p(t,a):(yt.d(1),yt=bt(t),yt&&(yt.c(),yt.m(tt,null)))},i(t){rt||(t&&(H||o((()=>{H=Y(I,T,{x:20,duration:500,delay:1200}),H.start()}))),D(ft),o((()=>{ct&&ct.end(1),lt=Y(v,T,{y:60,duration:500,delay:500}),lt.start()})),rt=!0)},o(t){lt&&lt.invalidate(),ct=w(v,T,{y:-60,duration:500}),rt=!1},d(t){t&&m(a),dt&&dt.d(),ft&&ft.d(),ut&&ut.d(),Et.d(),yt.d(),t&&ct&&ct.end(),nt=!1,it()}}}function J(t,s,a){let o,e,l,{blogData:c}=s,r="";x((async t=>{a(1,e=await L.auth.user()),await fetch(c.header_img).then((t=>{t.ok||a(0,c.header_img="https://picsum.photos/1366/768",c)}))}));const n=I(null,(t=>{L.from("comments").select("*").then((({data:s,error:o})=>{if(o)return void console.log(o);let e=[];s.forEach((t=>{t.post==c.id&&e.push(t)})),a(3,r=""),t(e)}));const s=L.from("comments").on("*",(s=>{if("INSERT"===s.eventType&&t([...M(n),s.new]),"DELETE"===s.eventType){let a=o.filter((t=>t.id!=s.old.id));t(a)}})).subscribe();return()=>L.removeSubscription(s)}));C(t,n,(t=>a(4,o=t)));return t.$$set=t=>{"blogData"in t&&a(0,c=t.blogData)},[c,e,l,r,o,n,async t=>{let{data:s,error:o}=await L.from("comments").insert({commentor:e.email,content:r,post:c.id});if(o)return V({text:`Something went wrong. ${o.message}`,duration:1500,gravity:"bottom",position:"right",style:{background:"#F0583C",color:"#fff"}}).showToast(),void a(3,r="");s&&(V({text:"Comment Posted.",duration:1500,gravity:"bottom",position:"right",style:{background:"#7CC88D",color:"#111"}}).showToast(),a(3,r=""))},function(){a(2,l=window.pageYOffset)},function(){r=this.value,a(3,r)}]}class Q extends t{constructor(t){super(),s(this,t,J,z,a,{blogData:0})}}export{Q as default};
