import{S as t,i as a,s,e as l,t as e,k as o,c as r,a as c,g as n,d as i,n as h,b as u,E as d,f,F as p,a0 as m,G as v,a6 as b,V as g,D as y,H as E,I as k,l as I,a7 as w,a8 as x,x as A,u as D,w as V,X as T,J as L,A as P,Y as U,r as N,Z as S,a4 as B,j as $,m as _,o as C,v as j,a9 as O}from"../../../chunks/vendor-1b153074.js";import{g as Y}from"../../../chunks/navigation-51f4a605.js";import{_ as H,b as M,s as R}from"../../../chunks/global-f53028be.js";/* empty css                               */import{A as G}from"../../../chunks/AdminPostCard_New-aadc9e0a.js";import"../../../chunks/singletons-12a22614.js";function q(t,a,s){const l=t.slice();return l[20]=a[s].id,l[21]=a[s].author,l}function z(t){let a,s,g,I,w,x,A,D,V,T,L,P,N,B,$,_,C,j,O,Y,H,M,R,G,q,z,F,J,K,Q,tt,at,st,lt,et,ot,rt,ct,nt,it,ht,ut,dt,ft,pt,mt,vt,bt,gt,yt,Et,kt,It=t[1]&&W(t);function wt(t,a){return t[4]?Z:X}let xt=wt(t),At=xt(t);return{c(){a=l("div"),s=l("p"),g=e("Add a story"),I=o(),w=l("div"),x=l("div"),A=l("div"),D=l("input"),V=o(),T=l("label"),L=e("The Title of your story"),P=o(),N=l("div"),B=l("div"),$=l("input"),_=o(),C=l("label"),j=e("Post Slug(this will identify a Post that will be seen in the address)"),O=o(),It&&It.c(),Y=o(),H=l("div"),M=l("div"),R=l("input"),G=o(),q=l("label"),z=e("Story Header Image URL"),F=o(),J=l("p"),K=e("*If you leave this blank, the site will generate a placeholder image"),Q=o(),tt=l("div"),at=l("div"),st=l("textarea"),lt=o(),et=l("label"),ot=e("Story content"),rt=o(),ct=l("p"),nt=e("*We prefer you to write the story content in HTML"),it=o(),ht=l("div"),ut=l("div"),dt=l("input"),ft=o(),pt=l("label"),At.c(),mt=o(),vt=l("div"),bt=l("button"),gt=e("Post your story"),this.h()},l(t){a=r(t,"DIV",{});var l=c(a);s=r(l,"P",{class:!0});var e=c(s);g=n(e,"Add a story"),e.forEach(i),I=h(l),w=r(l,"DIV",{class:!0});var o=c(w);x=r(o,"DIV",{class:!0});var u=c(x);A=r(u,"DIV",{class:!0});var d=c(A);D=r(d,"INPUT",{type:!0,class:!0,id:!0}),V=h(d),T=r(d,"LABEL",{for:!0});var f=c(T);L=n(f,"The Title of your story"),f.forEach(i),d.forEach(i),u.forEach(i),P=h(o),N=r(o,"DIV",{class:!0});var p=c(N);B=r(p,"DIV",{class:!0});var m=c(B);$=r(m,"INPUT",{type:!0,class:!0,id:!0}),_=h(m),C=r(m,"LABEL",{for:!0});var v=c(C);j=n(v,"Post Slug(this will identify a Post that will be seen in the address)"),v.forEach(i),m.forEach(i),p.forEach(i),O=h(o),It&&It.l(o),Y=h(o),H=r(o,"DIV",{class:!0});var b=c(H);M=r(b,"DIV",{class:!0});var y=c(M);R=r(y,"INPUT",{type:!0,class:!0,id:!0}),G=h(y),q=r(y,"LABEL",{for:!0});var E=c(q);z=n(E,"Story Header Image URL"),E.forEach(i),y.forEach(i),F=h(b),J=r(b,"P",{class:!0});var k=c(J);K=n(k,"*If you leave this blank, the site will generate a placeholder image"),k.forEach(i),b.forEach(i),Q=h(o),tt=r(o,"DIV",{class:!0});var U=c(tt);at=r(U,"DIV",{class:!0});var S=c(at);st=r(S,"TEXTAREA",{type:!0,style:!0,class:!0,id:!0}),c(st).forEach(i),lt=h(S),et=r(S,"LABEL",{for:!0});var W=c(et);ot=n(W,"Story content"),W.forEach(i),S.forEach(i),rt=h(U),ct=r(U,"P",{class:!0});var X=c(ct);nt=n(X,"*We prefer you to write the story content in HTML"),X.forEach(i),U.forEach(i),it=h(o),ht=r(o,"DIV",{class:!0});var Z=c(ht);ut=r(Z,"DIV",{class:!0});var yt=c(ut);dt=r(yt,"INPUT",{class:!0,type:!0,id:!0}),ft=h(yt),pt=r(yt,"LABEL",{class:!0,for:!0});var Et=c(pt);At.l(Et),Et.forEach(i),yt.forEach(i),Z.forEach(i),mt=h(o),vt=r(o,"DIV",{class:!0});var kt=c(vt);bt=r(kt,"BUTTON",{class:!0});var wt=c(bt);gt=n(wt,"Post your story"),wt.forEach(i),kt.forEach(i),o.forEach(i),l.forEach(i),this.h()},h(){u(s,"class","display-5"),u(D,"type","text"),u(D,"class","form-control bg-transparent text-white"),u(D,"id","story_title"),u(T,"for","story_title"),u(A,"class","form-floating mb-3"),u(x,"class","col-12"),u($,"type","text"),u($,"class","form-control bg-transparent text-white"),u($,"id","story_title"),$.readOnly=!0,u(C,"for","story_title"),u(B,"class","form-floating input-group mb-3"),u(N,"class","col-12"),u(R,"type","text"),u(R,"class","form-control bg-transparent text-white"),u(R,"id","story_imageUri"),u(q,"for","story_imageUri"),u(M,"class","form-floating mb-3"),u(J,"class","italic"),u(H,"class","col-12"),u(st,"type","text"),d(st,"min-height","10em"),u(st,"class","form-control bg-transparent text-white"),u(st,"id","story_content"),u(et,"for","story_content"),u(at,"class","form-floating mb-3"),u(ct,"class","italic"),u(tt,"class","col-12"),u(dt,"class","form-check-input"),u(dt,"type","checkbox"),u(dt,"id","toggleVisibility"),u(pt,"class","form-check-label"),u(pt,"for","toggleVisibility"),u(ut,"class","form-check form-switch"),u(ht,"class","col-12 mt-3"),u(bt,"class","btn btn-lg btn-success w-100"),u(vt,"class","col-12 mt-5"),u(w,"class","row mt-3")},m(l,e){f(l,a,e),p(a,s),p(s,g),p(a,I),p(a,w),p(w,x),p(x,A),p(A,D),m(D,t[0]),p(A,V),p(A,T),p(T,L),p(w,P),p(w,N),p(N,B),p(B,$),m($,t[3]),p(B,_),p(B,C),p(C,j),p(w,O),It&&It.m(w,null),p(w,Y),p(w,H),p(H,M),p(M,R),m(R,t[1]),p(M,G),p(M,q),p(q,z),p(H,F),p(H,J),p(J,K),p(w,Q),p(w,tt),p(tt,at),p(at,st),m(st,t[2]),p(at,lt),p(at,et),p(et,ot),p(tt,rt),p(tt,ct),p(ct,nt),p(w,it),p(w,ht),p(ht,ut),p(ut,dt),dt.checked=t[4],p(ut,ft),p(ut,pt),At.m(pt,null),p(w,mt),p(w,vt),p(vt,bt),p(bt,gt),Et||(kt=[v(D,"input",t[12]),v(D,"input",(function(){b(t[9](t[0]))&&t[9](t[0]).apply(this,arguments)})),v($,"input",t[13]),v(R,"input",t[14]),v(st,"input",t[15]),v(dt,"change",t[16]),v(bt,"click",t[8])],Et=!0)},p(a,s){t=a,1&s&&D.value!==t[0]&&m(D,t[0]),8&s&&$.value!==t[3]&&m($,t[3]),t[1]?It?It.p(t,s):(It=W(t),It.c(),It.m(w,Y)):It&&(It.d(1),It=null),2&s&&R.value!==t[1]&&m(R,t[1]),4&s&&m(st,t[2]),16&s&&(dt.checked=t[4]),xt!==(xt=wt(t))&&(At.d(1),At=xt(t),At&&(At.c(),At.m(pt,null)))},i(t){yt||y((()=>{yt=U(a,S,{x:20,duration:500}),yt.start()}))},o:E,d(t){t&&i(a),It&&It.d(),At.d(),Et=!1,k(kt)}}}function W(t){let a,s,e;return{c(){a=l("div"),s=l("img"),this.h()},l(t){a=r(t,"DIV",{class:!0});var l=c(a);s=r(l,"IMG",{style:!0,src:!0,alt:!0}),l.forEach(i),this.h()},h(){d(s,"width","100%"),d(s,"height","250px"),d(s,"object-fit","cover"),g(s.src,e=""!=t[1]?t[1]:"https://via.placeholder.com/1500?text=This+is+a+placeholder+image")||u(s,"src",e),u(s,"alt","..."),u(a,"class","col-12 mb-1")},m(t,l){f(t,a,l),p(a,s)},p(t,a){2&a&&!g(s.src,e=""!=t[1]?t[1]:"https://via.placeholder.com/1500?text=This+is+a+placeholder+image")&&u(s,"src",e)},d(t){t&&i(a)}}}function X(t){let a;return{c(){a=e("Public Content")},l(t){a=n(t,"Public Content")},m(t,s){f(t,a,s)},d(t){t&&i(a)}}}function Z(t){let a;return{c(){a=e("Exclusive Content")},l(t){a=n(t,"Exclusive Content")},m(t,s){f(t,a,s)},d(t){t&&i(a)}}}function F(t){let a,s,l,e={ctx:t,current:null,token:null,hasCatch:!1,pending:ot,then:K,catch:J,value:18,blocks:[,,,]};return w(s=t[6],e),{c(){a=I(),e.block.c()},l(t){a=I(),e.block.l(t)},m(t,s){f(t,a,s),e.block.m(t,e.anchor=s),e.mount=()=>a.parentNode,e.anchor=a,l=!0},p(a,l){t=a,e.ctx=t,64&l&&s!==(s=t[6])&&w(s,e)||x(e,t,l)},i(t){l||(A(e.block),l=!0)},o(t){for(let a=0;a<3;a+=1){const t=e.blocks[a];D(t)}l=!1},d(t){t&&i(a),e.block.d(t),e.token=null,e=null}}}function J(t){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function K(t){let a,s,d,m,v,b,g,E,k,I,V={ctx:t,current:null,token:null,hasCatch:!1,pending:et,then:tt,catch:Q,value:19,blocks:[,,,]};return w(E=t[7],V),{c(){a=l("div"),s=l("p"),d=e("Your Stories"),m=o(),v=l("div"),b=l("div"),g=l("div"),V.block.c(),this.h()},l(t){a=r(t,"DIV",{});var l=c(a);s=r(l,"P",{class:!0});var e=c(s);d=n(e,"Your Stories"),e.forEach(i),m=h(l),v=r(l,"DIV",{class:!0});var o=c(v);b=r(o,"DIV",{class:!0});var u=c(b);g=r(u,"DIV",{class:!0});var f=c(g);V.block.l(f),f.forEach(i),u.forEach(i),o.forEach(i),l.forEach(i),this.h()},h(){u(s,"class","display-5"),u(g,"class","mt-1 d-flex row row-cols-1 row-cols-md-2 g-3"),u(b,"class","col-12"),u(v,"class","row text-white")},m(t,l){f(t,a,l),p(a,s),p(s,d),p(a,m),p(a,v),p(v,b),p(b,g),V.block.m(g,V.anchor=null),V.mount=()=>g,V.anchor=null,I=!0},p(a,s){t=a,V.ctx=t,128&s&&E!==(E=t[7])&&w(E,V)||x(V,t,s)},i(t){I||(A(V.block),k||y((()=>{k=U(a,S,{x:20,duration:500}),k.start()})),I=!0)},o(t){for(let a=0;a<3;a+=1){const t=V.blocks[a];D(t)}I=!1},d(t){t&&i(a),V.block.d(),V.token=null,V=null}}}function Q(t){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function tt(t){let a,s,l=t[19]&&at(t);return{c(){l&&l.c(),a=I()},l(t){l&&l.l(t),a=I()},m(t,e){l&&l.m(t,e),f(t,a,e),s=!0},p(t,s){t[19]?l?(l.p(t,s),128&s&&A(l,1)):(l=at(t),l.c(),A(l,1),l.m(a.parentNode,a)):l&&(N(),D(l,1,1,(()=>{l=null})),V())},i(t){s||(A(l),s=!0)},o(t){D(l),s=!1},d(t){l&&l.d(t),t&&i(a)}}}function at(t){let a,s,l=t[19],e=[];for(let r=0;r<l.length;r+=1)e[r]=lt(q(t,l,r));const o=t=>D(e[t],1,1,(()=>{e[t]=null}));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();a=I()},l(t){for(let a=0;a<e.length;a+=1)e[a].l(t);a=I()},m(t,l){for(let a=0;a<e.length;a+=1)e[a].m(t,l);f(t,a,l),s=!0},p(t,s){if(192&s){let r;for(l=t[19],r=0;r<l.length;r+=1){const o=q(t,l,r);e[r]?(e[r].p(o,s),A(e[r],1)):(e[r]=lt(o),e[r].c(),A(e[r],1),e[r].m(a.parentNode,a))}for(N(),r=l.length;r<e.length;r+=1)o(r);V()}},i(t){if(!s){for(let t=0;t<l.length;t+=1)A(e[t]);s=!0}},o(t){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)D(e[a]);s=!1},d(t){O(e,t),t&&i(a)}}}function st(t){let a,s,l;return a=new G({props:{id:t[20]}}),{c(){$(a.$$.fragment),s=o()},l(t){_(a.$$.fragment,t),s=h(t)},m(t,e){C(a,t,e),f(t,s,e),l=!0},p(t,s){const l={};128&s&&(l.id=t[20]),a.$set(l)},i(t){l||(A(a.$$.fragment,t),l=!0)},o(t){D(a.$$.fragment,t),l=!1},d(t){j(a,t),t&&i(s)}}}function lt(t){let a,s,l=t[21]==t[6].email.split("@")[0],e=l&&st(t);return{c(){e&&e.c(),a=I()},l(t){e&&e.l(t),a=I()},m(t,l){e&&e.m(t,l),f(t,a,l),s=!0},p(t,s){192&s&&(l=t[21]==t[6].email.split("@")[0]),l?e?(e.p(t,s),192&s&&A(e,1)):(e=st(t),e.c(),A(e,1),e.m(a.parentNode,a)):e&&(N(),D(e,1,1,(()=>{e=null})),V())},i(t){s||(A(e),s=!0)},o(t){D(e),s=!1},d(t){e&&e.d(t),t&&i(a)}}}function et(t){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function ot(t){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function rt(t){let a,s,m,b,g,E,I,w,x,L,P,B,$,_,C,j,O,Y,H,M,R,G,q,W,X,Z,J,K,Q,tt=1==t[5]&&z(t),at=2==t[5]&&F(t);return{c(){a=l("svele:head"),s=l("title"),m=e("Dashboard | Abie G"),b=o(),g=l("main"),E=l("div"),I=l("p"),w=e("Moderator Dashboard"),x=o(),L=l("div"),P=l("input"),$=o(),_=l("label"),C=e("Add a Story"),j=o(),O=l("input"),H=o(),M=l("label"),R=e("Your Stories"),G=o(),q=l("div"),tt&&tt.c(),W=o(),at&&at.c(),this.h()},l(t){a=r(t,"SVELE:HEAD",{});var l=c(a);s=r(l,"TITLE",{});var e=c(s);m=n(e,"Dashboard | Abie G"),e.forEach(i),l.forEach(i),b=h(t),g=r(t,"MAIN",{style:!0,class:!0});var o=c(g);E=r(o,"DIV",{class:!0});var u=c(E);I=r(u,"P",{class:!0});var d=c(I);w=n(d,"Moderator Dashboard"),d.forEach(i),x=h(u),L=r(u,"DIV",{class:!0,role:!0,"aria-label":!0});var f=c(L);P=r(f,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),$=h(f),_=r(f,"LABEL",{class:!0,for:!0});var p=c(_);C=n(p,"Add a Story"),p.forEach(i),j=h(f),O=r(f,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),H=h(f),M=r(f,"LABEL",{class:!0,for:!0});var v=c(M);R=n(v,"Your Stories"),v.forEach(i),f.forEach(i),G=h(u),q=r(u,"DIV",{class:!0});var y=c(q);tt&&tt.l(y),W=h(y),at&&at.l(y),y.forEach(i),u.forEach(i),o.forEach(i),this.h()},h(){u(I,"class","display-3"),u(P,"type","radio"),u(P,"class","btn-check"),u(P,"name","btnradio"),u(P,"id","nav1"),u(P,"autocomplete","off"),P.checked=B=1==t[5],u(_,"class","btn btn-lg btn-outline-light"),u(_,"for","nav1"),u(O,"type","radio"),u(O,"class","btn-check"),u(O,"name","btnradio"),u(O,"id","nav2"),u(O,"autocomplete","off"),O.checked=Y=2==t[5],u(M,"class","btn btn-lg btn-outline-light"),u(M,"for","nav2"),u(L,"class","btn-group mt-3 w-100"),u(L,"role","group"),u(L,"aria-label","Basic radio toggle button group"),u(q,"class","mt-5"),u(E,"class","container text-white"),d(g,"margin-bottom","10em"),u(g,"class","svelte-xq1t9b")},m(l,e){f(l,a,e),p(a,s),p(s,m),f(l,b,e),f(l,g,e),p(g,E),p(E,I),p(I,w),p(E,x),p(E,L),p(L,P),p(L,$),p(L,_),p(_,C),p(L,j),p(L,O),p(L,H),p(L,M),p(M,R),p(E,G),p(E,q),tt&&tt.m(q,null),p(q,W),at&&at.m(q,null),J=!0,K||(Q=[v(P,"click",t[10]),v(O,"click",t[11])],K=!0)},p(t,[a]){(!J||32&a&&B!==(B=1==t[5]))&&(P.checked=B),(!J||32&a&&Y!==(Y=2==t[5]))&&(O.checked=Y),1==t[5]?tt?(tt.p(t,a),32&a&&A(tt,1)):(tt=z(t),tt.c(),A(tt,1),tt.m(q,W)):tt&&(tt.d(1),tt=null),2==t[5]?at?(at.p(t,a),32&a&&A(at,1)):(at=F(t),at.c(),A(at,1),at.m(q,null)):at&&(N(),D(at,1,1,(()=>{at=null})),V())},i(t){J||(A(tt),A(at),y((()=>{Z&&Z.end(1),X=U(g,S,{y:-40,duration:500,delay:500}),X.start()})),J=!0)},o(t){D(at),X&&X.invalidate(),Z=T(g,S,{y:40,duration:500}),J=!1},d(t){t&&i(a),t&&i(b),t&&i(g),tt&&tt.d(),at&&at.d(),t&&Z&&Z.end(),K=!1,k(Q)}}}const ct=!0;function nt(t,a,s){let l,e,o,r,c,n,i;L(t,H,(t=>s(6,e=t))),L(t,M,(t=>s(7,o=t)));let h=!1;P((async t=>{await!e&&Y("/admin")}));return s(5,l=2),[r,c,n,i,h,l,e,o,async t=>{if(r&&n){const{data:t,error:a}=await R.from("posts").insert([{title:r,author:e.email.split("@")[0],slug:i,content:n,header_img:c||"https://picsum.photos/500/500",isExclusive:h}]);a||(B({text:`${r} is now posted ${h?"exclusively":"publicly"}`,duration:2e3,close:!0,gravity:"bottom",position:"right",style:{background:"#06d6a0",color:"#212529"}}).showToast(),s(0,r=""),s(2,n=""),s(3,i=""),s(4,h=!1),s(5,l=2))}else B({text:"Please fill the required fields",duration:2e3,close:!0,gravity:"bottom",position:"right",style:{background:"#ef476f"}}).showToast()},t=>{t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var a="ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;",l=0,e=a.length;l<e;l++)t=t.replace(new RegExp(a.charAt(l),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(l));t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),s(3,i=t)},()=>s(5,l=1),()=>s(5,l=2),function(){r=this.value,s(0,r)},function(){i=this.value,s(3,i)},function(){c=this.value,s(1,c)},function(){n=this.value,s(2,n)},function(){h=this.checked,s(4,h)}]}class it extends t{constructor(t){super(),a(this,t,nt,rt,s,{})}}export{it as default,ct as prerender};
