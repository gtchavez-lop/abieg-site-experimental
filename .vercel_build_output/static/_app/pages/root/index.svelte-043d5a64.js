import{S as s,i as a,s as e,a4 as t,j as o,k as r,e as n,t as c,m as i,n as l,c as d,a as u,g as h,d as f,b as m,E as g,o as p,f as v,F as y,h as b,x as A,D as x,u as E,V as $,v as j,A as k,W as w,X as T}from"../../chunks/vendor-969998bb.js";import{g as D}from"../../chunks/navigation-51f4a605.js";import{s as I}from"../../chunks/global-04cce44f.js";import"../../chunks/singletons-12a22614.js";function R(s){let a,e,k,D,I,R,V,P,q,L,N,S,U,z,F,H,M;return a=new t({props:{options:{duration:4e3}}}),{c(){o(a.$$.fragment),e=r(),k=n("main"),D=n("div"),I=n("h1"),R=c("Root User Access"),V=r(),P=n("div"),q=n("p"),L=c(s[0]),N=r(),S=n("div"),U=n("span"),z=c("Loading..."),this.h()},l(t){i(a.$$.fragment,t),e=l(t),k=d(t,"MAIN",{class:!0});var o=u(k);D=d(o,"DIV",{class:!0});var r=u(D);I=d(r,"H1",{class:!0});var n=u(I);R=h(n,"Root User Access"),n.forEach(f),V=l(r),P=d(r,"DIV",{style:!0,class:!0});var c=u(P);q=d(c,"P",{});var m=u(q);L=h(m,s[0]),m.forEach(f),N=l(c),S=d(c,"DIV",{class:!0,role:!0});var g=u(S);U=d(g,"SPAN",{class:!0});var p=u(U);z=h(p,"Loading..."),p.forEach(f),g.forEach(f),c.forEach(f),r.forEach(f),o.forEach(f),this.h()},h(){m(I,"class","display-3"),m(U,"class","visually-hidden"),m(S,"class","spinner-border"),m(S,"role","status"),g(P,"margin-top","25vh"),m(P,"class","d-flex flex-column align-items-center justify-content-center"),m(D,"class","container text-white"),m(k,"class","svelte-rplqxt")},m(s,t){p(a,s,t),v(s,e,t),v(s,k,t),y(k,D),y(D,I),y(I,R),y(D,V),y(D,P),y(P,q),y(q,L),y(P,N),y(P,S),y(S,U),y(U,z),M=!0},p(s,[a]){(!M||1&a)&&b(L,s[0])},i(s){M||(A(a.$$.fragment,s),x((()=>{H&&H.end(1),F=w(k,T,{y:-40,duration:500,delay:500}),F.start()})),M=!0)},o(s){E(a.$$.fragment,s),F&&F.invalidate(),H=$(k,T,{y:40,duration:500}),M=!1},d(s){j(a,s),s&&f(e),s&&f(k),s&&H&&H.end()}}}function V(s,a,e){let t,o="Please standby as we check for an existing account";return k((async s=>{t=await I.auth.user(),t?setTimeout((async()=>{e(0,o="Account detected");let{data:s,error:a}=await I.from("users").select("*").eq("id",t.id);setTimeout((()=>{console.log(s),s[0].isAdmin?(e(0,o="Redirecting to dashboard"),setTimeout((()=>{D("/root/dashboard")}),2e3)):(e(0,o="Account is not authorized to proceed further. Redirecting to home page"),setTimeout((()=>{D("/")}),2e3))}),1e3)}),1e3):(e(0,o="Account cannot be verified"),setTimeout((()=>{D("/")}),1e3))})),[o]}class P extends s{constructor(s){super(),a(this,s,V,R,e,{})}}export{P as default};
